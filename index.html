<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <title>跳转中...</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script>
    // 所有 WhatsApp 链接（轮换顺序分配）
    const links = [
      "https://wa.me/447851577966",
      "https://wa.me/447563734086",
      "https://wa.me/447843751871",
      "https://wa.me/447563734106"
    ];

    const LOCAL_KEY = "waAssignedIndex";
    const GLOBAL_KEY = "waGlobalCounter";

    function getAssignedIndex() {
      // 如果已分配过，直接返回
      const saved = localStorage.getItem(LOCAL_KEY);
      if (saved !== null) return parseInt(saved, 10);

      // 从 globalCounter 读取当前轮换编号（跨用户模拟）
      let globalIndex = parseInt(localStorage.getItem(GLOBAL_KEY) || "0", 10);
      if (isNaN(globalIndex)) globalIndex = 0;

      // 按顺序分配
      const assignedIndex = globalIndex % links.length;

      // 存储用户专属索引
      localStorage.setItem(LOCAL_KEY, assignedIndex);
      // 增加 globalIndex
      localStorage.setItem(GLOBAL_KEY, globalIndex + 1);

      return assignedIndex;
    }

    function redirect() {
      const index = getAssignedIndex();
      const target = links[index];
      window.location.href = target;
    }

    window.onload = redirect;
  </script>
</head>
<body>
</body>
</html>
